
                            ┌────────────────────────────────────┐
                            │                                    │
                            │         Participant's code         │
                            │                                    │
                            └───────┬────────────────────────────┘
                                    │                    ▲
                                    │                    │
                                    ▼                    │
                     ┌───────────────────────┬───────────┴────────────┐
                     │                       │                        │
                     │       INPUT           │         OUTPUT         │  Shared memory/Files/Sockets
                     │ (motor drive signals) │     (sensor data)      │
                     │                       │                        │
                     └─────────┬─────────────┴────────────────────────┘
                               │                               ▲
                               │                               │
                               │                               │
                               │                               │
        ┌──────────────────────┼───────────────────────────────┼───────────────────────────────────────────────┐
        │                      │                               │                                               │
        │                      │                               │                                               │
        │                      │                               │ Sensor values                                 │
        │                      │                               │                                               │
        │                      │                               │                   ┌─────────────────────┐     │
        │                      │                               │                   │                     │     │
        │                      ▼                               │                   │                     │     │
        │       ┌────────────────────────────────────┐         │                   │      Display        │     │
        │       │                                    │         │                   │                     │     │
        │       │                                    │         │                   │                     │     │
        │       │        RobotMotion Object          │         │                   └─────────────────────┘     │
        │       │                                    │         │                              ▲                │
        │       │    (Contains motor calculations)   │         │                              │                │
        │       │                                    │         │                              │                │   Simulator
        │       │                                    │         │                              │                │
        │       └──────────────┬─────────────────────┘         │                (via pygame)  │                │
        │                      │                               │                              │                │
        │                      │                               │                              │                │
        │                      │                               │                              │                │
        │          Speed       │                             ┌─┴──────────────────────────────┴──────┐         │
        │     Angular velocity │                             │                                       │         │
        │                      │                             │                                       │         │
        │                      │                             │           Robot Object                │         │
        │                      └───────────────────────────► │                                       │         │
        │                                                    │   (Contains position and velocities)  │         │
        │                                                    │                                       │         │
        │                                                    └───────────────────────────────────────┘         │
        │                                                                                                      │
        └──────────────────────────────────────────────────────────────────────────────────────────────────────┘
        
        
        
        
                                                                            
                 SENSOR DATA RECIEVER 2-WAY COMMS.                
  ┌──────────────────────────────────────────────────────────────┐  
  │                                                              │  
  │                                                              │  
  │     CLIENT LOGIC                          SIMULATOR SERVER   │  
  │           │                                     │            │  
  │           │                                     │ SERVER     │  
  │           │                                     │ WAITING    │  
  │           │                                     │            │  
  │           │        SEND: SENSOR_DATA_REQ        │            │  
  │           ├────────────────────────────────────►│            │  
  │           │                                     │            │  
  │           │                                     │            │  
  │           │                                     │            │  
  │           │        RECEIVE: sensor_data         │            │  
  │           │◄────────────────────────────────────┤            │ 
  │           │                                     │            │  
  │           │                 .                   │            │  
  │           │                 .                   │            │  
  │           │                 .                   │            │  
  │           │                 .                   │            │  
  │           │                                     │            │  
  │ SIMULATOR │ ┌─────────────────────────────────┐ │            │  
  │ CLOSED    │ └─────────────────────────────────┘ │ SERVER     │  
  │           │                                     │ WAITING    │  
  │           │                                     │ TO CLOSE   │  
  │           │        SEND: SENSOR_DATA_REQ        │            │  
  │           ├────────────────────────────────────►│            │  
  │           │                                     │            │  
  │           │                                     │ REQUEST    │  
  │           │                                     │ IGNORED    │  
  │           │                                     │            │  
  │           │     RECEIVE: SIM_COMPLETE           │            │  
  │           │◄────────────────────────────────────┤            │  
  │           │                                     │            │  
  │           │                                     │ CONNECTION │  
  │           │                                     │ CLOSED     │  
  │           │                                     │            │  
  │ CONNECTION├─────────────────────────────────────┤            │  
  │ CLOSED    │                                     │            │  
  │           │                                     │            │  
  │                                                              │  
  │                                                              │  
  │                                                              │  
  │                                                              │  
  │                                                              │  
  └──────────────────────────────────────────────────────────────┘  
  
  
                                                                      
               MOTOR DRIVE INPUTS SENDER 2-WAY COMMS.                
  ┌──────────────────────────────────────────────────────────────┐  
  │                                                              │  
  │                                                              │  
  │     CLIENT LOGIC                          SIMULATOR SERVER   │  
  │           │                                     │            │  
  │           │                                     │ SERVER     │  
  │           │                                     │ WAITING    │  
  │           │                                     │            │  
  │           │        SEND: motor_drive_inp        │            │  
  │           ├────────────────────────────────────►│            │  
  │           │                                     │            │  
  │           │                                     │            │  
  │           │                                     │            │  
  │           │                                     │            │  
  │           │     RECEIVE: MOTOR_INP_RECV_ACK     │            │  
  │           │◄────────────────────────────────────┤            │  
  │           │                                     │            │  
  │           │                                     │            │  
  │           │                 .                   │            │  
  │           │                 .                   │            │  
  │           │                 .                   │            │  
  │           │                 .                   │            │  
  │ SIMULATOR │ ┌─────────────────────────────────┐ │            │  
  │ CLOSED    │ └─────────────────────────────────┘ │ SERVER     │  
  │           │                                     │ WAITING    │  
  │           │                                     │ TO CLOSE   │  
  │           │        SEND: motor_drive_inp        │            │  
  │           ├────────────────────────────────────►│            │  
  │           │                                     │            │  
  │           │                                     │ INPUTS     │  
  │           │                                     │ IGNORED    │  
  │           │                                     │            │  
  │           │     RECEIVE: SIM_COMPLETE           │            │  
  │           │◄────────────────────────────────────┤            │  
  │           │                                     │            │  
  │           │                                     │ CONNECTION │  
  │           │                                     │ CLOSED     │  
  │           │                                     │            │  
  │ CONNECTION├─────────────────────────────────────┤            │  
  │ CLOSED    │                                     │            │  
  │           │                                     │            │  
  │                                                              │  
  │                                                              │  
  │                                                              │  
  │                                                              │  
  │                                                              │  
  └──────────────────────────────────────────────────────────────┘  